# 一些细节

### 较大数组的声明

在 <算法竞赛入门经典（第 2 版）> 中有提示：

> 比较大的数组应尽量声明在 main 函数外，否则程序可能无法运行。

因为：

>局部变量是在栈上分配内存空间的。
>如果在 main 中的数组太大，可能会造成栈溢出。

### sizeof

对于一些情况，sizeof() 的结果会与预想的不一样

当被调函数接收参数为数组时，sizeof 的结果是该数组首地址字节数，而非该数组的长度。
当对动态分配的数组使用 sizeof 时，其结果也是该数组首地址字节数，而非数组长度。

~~~c
#include <stdio.h>
#include <malloc.h>

void test(int a[]){
    printf("%d,%x\n",sizeof(a),a);
}

int main(){
	int a[10];
	printf("%d,%x\n",sizeof(a),a);
	test(a);
	int * b = (int *) malloc( 10 * sizeof(int) );
	printf("%d,%x\n",sizeof(b),b);
    return 0;
}
//运行结果：
//40,60fed4
//4,60fed4
//4,741468
~~~

这是因为，sizeof 对数组是返回数组占用字节数，而对其他数据类型变量返回该变量占用字节数。

### 数组作为函数参数传递时，退化为指针

在调用函数时传递数组参数，实际上传递的是指向该数组首地址的指针，于是在被调函数中对 a 使用 sizeof 是对指针进行 sizeof，结果为指针类型所占字节数。
动态分配内存的变量 b，本身就只是指针，而非数组，自然对其使用 sizeof，得到的也是指针类型所占字节数。

另一点，当传递数组，要用到数组长度时，记得把数组长度传递过去：

~~~C
void test(int a[]，int n){
    ...
}
~~~

