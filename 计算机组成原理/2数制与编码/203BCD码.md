# BCD码

因为计算机只能存储1/0，即只能处理二进制数，而作为人来说，十进制数才是我们使用最方便的。

于是在使用计算机的过程中，会经常涉及到二进制与十进制的转换。
比如我输入是十进制，计算机需要转换为二进制存储；我读取数据显示，计算机需要二进制转换为十进制显示。

而每次转换，如果都使用上一节讲到了方法计算得来的话，就非常地慢，毕竟每一次都要计算很多。

相比之下如果我们直接建立一个表格，即我们自己建立一个二进制数与十进制数的映射，以后二进制数和十进制数转换时，就直接查表，查询十进制数与二进制数互相对应的是多少，就快很多。

当然这种我们自己建立的映射，自然也是要建立其运算逻辑满足正常的运算逻辑的。
所以，计算机中采用我们自己建立的映射的二进制代码进行我们设定的计算逻辑时，也是要符合正常的计算逻辑的。

于是，我们只需要定义十进制数0~9与二进制的映射关系，然后定义其符合正常运算的运算逻辑就好啦。

## 一. BCD码

**BCD**（Binary Coded Decimal）码，又称二-十编码，使用四位二进制代码表示一位十进制数。

### 1.1 8421码

最常用的BCD码是**8421码**，又称**NBCD**（Natural Binary Coded Decimal）码。

（8421是指每一位的位权值，其实就是正常二进制的对应关系）

| 十进制数 | 8421码  | 8421奇效验码 | 8421偶效验码 |
| :------: | :-----: | :----------: | :----------: |
|    0     | 0 0 0 0 |  1 0 0 0 0   |  0 0 0 0 0   |
|    1     | 0 0 0 1 |  0 0 0 0 1   |  1 0 0 0 1   |
|    2     | 0 0 1 0 |  0 0 0 1 0   |  1 0 0 1 0   |
|    3     | 0 0 1 1 |  1 0 0 1 1   |  0 0 0 1 1   |
|    4     | 0 1 0 0 |  0 0 1 0 0   |  1 0 1 0 0   |
|    5     | 0 1 0 1 |  1 0 1 0 1   |  0 0 1 0 1   |
|    6     | 0 1 1 0 |  1 0 1 1 0   |  0 0 1 1 0   |
|    7     | 0 1 1 1 |  0 0 1 1 1   |  1 0 1 1 1   |
|    8     | 1 0 0 0 |  0 1 0 0 0   |  1 1 0 0 0   |
|    9     | 1 0 0 1 |  1 1 0 0 1   |  0 1 0 0 1   |

8421码下的加减：

1. 没有溢出时：

   和二进制是一样的。

    $\begin{aligned}十进制:&2&+&3&=&5\\8421码:&0010&+&0011&=&0101\end{aligned}$ ，

2. 溢出时：

   值超过了1001（9）时，溢出后的值再加上0110（6），得到最终结果。

    $\begin{aligned}十进制:&5&+&8&=&13\\8421码:&0101(5)&+&1000(8)&=&1101(13)+0110(6)=1\quad 0011(13)=0001\quad 0011(13)\end{aligned}$ ，

### 1.2 其他编码方案

8421码只是BCD码的一种方案，还有其他的方案，也就是其他的映射关系和运算逻辑。

**余3码**：

| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0011 | 0100 | 0101 | 0110 | 0111 | 1000 | 1001 | 1010 | 1011 | 1100 |

就是8421码+ $(0010)_2$ 。

**2421码**：

| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0000 | 0001 | 0010 | 0011 | 0100 | 1011 | 1100 | 1101 | 1110 | 1111 |

2421指每一位的位权值。

涉及到一个问题，这里最高位和第二低位的的位权值都是2，那么比如6我可以写为0110，也可以写为1100；3我可以写为0011，也可以是1001，这样这个映射就不是一对一的双射了。

不过反正是我们自己设定的映射，于是规定0-4不使用高位的2，5-9都必须使用高位的2，这样就还是双射关系了。

看王道考研的视频里没讲余3码和2421码的运算逻辑，所以这里我就没写了。

2020.08.21