# 栈和队列的应用

## 一. 栈的应用

### 1.1 栈在括号匹配中的应用

创建空栈，
字符串依次入栈，当出现右括号时，才一直出栈，直到与之相匹配的左括号出栈，以此重复。

如果出现，中途已经空栈但仍请求出栈，或结束时不为空栈，则说明该括号序列不匹配。

### 1.2 栈在表达式求值中的应用

#### 1.2.1 中缀表达式：a+b-c*d

我们日常生活写的表达式，当然还可能有括号，这里例子我懒没写括号。

#### 1.2.2 后缀表达式：ab+cd*-

处理前缀表达式时，从字符串**左侧**向右开始处理。

##### 1.2.2.1 中缀表达式转后缀表达式（人算）：

左优先，即只要左侧存在能进行转换的运算符，就先进行转换。

##### 1.2.2.2 中缀表达式转后缀表达式的算法（机算）：

从左往右扫描字符串，直到处理完所有字符。

1. 若该字符为操作数，则直接加入后缀表达式。

2. 若该字符为界限符号（括号 " ( "，" ) "），

   若为左括号，则入栈；

   若为右括号，则一直出栈，将出栈的运算符依次直接加入后缀表达式，直到与之相匹配的左括号出栈后，停止。

   括号本身不加入运算表达式。

3. 若该字符为运算符，则依次弹出优先级高于或等于该字符的所有运算符，并加入后缀表达式。

   直到遇到左括号或栈空时停止。

   然后，将**该字符入栈**。

   乘除同级，加减同级，乘除大于加减。

4. 当字符串扫描完毕，而栈中还有运算符时，则运算符出栈，加入后缀表达式。

##### 1.2.2.3 后缀表达式的运算算法：

1. **从左往右**扫描字符串，直到处理完所有字符。
2. 若该字符为操作数，则入栈，回到 1；
3. 若该字符为运算符，则出栈两个栈顶元素，进行运算，并将运算结果入栈，回到1。
4. 正常处理完后，栈中只会有一个最终的运算结果。

##### 1.2.2.4 实现中缀表达式运算的算法

也就是中缀转后缀算法 + 后缀运算算法的结合。

1. 需要两个空栈，操作数栈和运算符栈。

2. 从左往右扫描字符串，直到处理完所有字符。

3. 若该字符为操作数，则压入操作数栈。

4. 若该字符为界限符或运算符，则依照中缀转换后缀的算法规则，压入运算符栈。

   每次运算符栈出栈一个运算符时，操作数栈就会出栈两个操作数，运算后，将运算结果压入操作数栈。

5. 正常处理完后，只会在操作数栈中有一个最终的运算结果。

#### 1.2.3 前缀表达式：-+ab*cd，

处理前缀表达式时，从字符串**右侧**向左开始处理。

##### 1.2.3.1 中缀表达式转前缀表达式（人算）：

右优先，即只要右侧存在能进行转换的运算符，就先进行转换。

##### 1.2.3.2 前缀表达式的运算算法：

1. **从右往左**扫描字符串，直到处理完所有字符。
2. 若该字符为操作数，则入栈，回到 1；
3. 若该字符为运算符，则出栈两个栈顶元素，进行运算，并将运算结果入栈，回到1。
4. 正常处理完后，栈中只会有一个最终的运算结果。

**注意**：
在后缀表达式的算法中，先出栈的是右操作数；而在前缀表达式的算法中，先出栈的是左操作数。当遇到减法、除法时，顺序错了运算结果就错了。

### 1.3 栈在递归中的应用

递归调用时，函数调用栈可称为递归工作栈。

## 二. 队列的应用

### 2.1 队列在层次遍历中的应用

树的层次遍历：

1. 根结点入队。
2. 若队空，则结束遍历；否则，重复 3。
3. 队列中第一个结点出队，并访问之。若其有左孩子，则左孩子入队，然后若其有右孩子，则右孩子入队。

图的广度优先遍历：

1. 起始结点入队。
2. 若队空，则结束遍历；否则，重复 3。
3. 队列中第一个结点出队，并访问之。将其未入队过的相连接的结点入队。

### 2.2 队列在计算机系统中的应用

例如操作系统中的先来先服务FCFS，缓冲区。

2021.07.28

